adblock#.uc.js


概要

	Adblock/Adblock plus（以下ADB）の劣化版.
	一応単に広告を非表示にするのではなく読み込み自体をブロックしてるつもり.
	「ツール」メニュー内にON,OFF用のメニューを作成する.
	速度は 50filters -> 150ms/site くらい.
	ブロックしたURLはエラーコンソールに出力される.


フィルタについて

	ADBのフィルタとあまり互換性がない.
	同梱のAdblock Adblock plus用リスト変換.htmlで変換できる(不完全).
	フィルタは 単純文字列 > アスタリスク > 正規表現の順で遅くなる（100000回ベンチマーク結果は順に235ms,1491ms,3167ms）.
	できるだけ単純文字列で済ませられるようにするのがコツ（正規表現でまとめないでバラの単純文字列にする 等）

	* デフォルトで部分一致なのでADBでフィルタの前後に必要な「*」は必要なく、単純な文字列でOK.
		* ただし、本家で「*/ads/*」のようなフィルターは正規表現との混乱を避けるため、そのまま */ads/* と表記する.
	* 正規表現/アスタリスク/() 対応.
		* 正規表現は「/」で括ること（ADBと同じ）.
		* アスタリスクをを使用するフィルターは「+」で括ること（独自仕様のため注意）.
		* 「()」を使用するフィルターは正規表現で表記すること.
	* 前方一致/後方一致フィルタ対応
		* 前方一致は先頭に、後方一致は最後に「|」をつける.
		* 前方一致/後方一致フィルタには単純文字列とアスタリスクしか使用できない.
	* ホワイトリスト対応
		* ホワイトリストは先頭に「@@」をつけること.
		* ホワイトリストにはすべての種類のフィルタが使用できる.

	* フィルタオプション未対応(最後尾に$つけてファイルの種類を指定するヤツ)
	* CSSによる要素非表示フィルタ未対応(対応予定無)

	* adblock#.uc.js内のコメントも参照のこと.


Adblock Adblock plus用リスト変換.htmlについて

	ADB用フィルタを暫定変換するスクリプト.

	1.　ADBフィルタリストをエクスポートし、ファイルの中身を「変換元」にコピペ
	2.　「変換」を押すと「変換後」に変換されたものが出てくる

	* 重複は確認しない.
	* CSSによる要素非表示フィルタは未対応.
	* 未対応のフィルタは基本的にそのままの文字列で出力される.
	* 正しく変換するようにしているつもりだが一応出力されたものは一度確認すること.
	* 一応 EasyList (https://easylist.adblockplus.org/easylist.txt)
	  に載っているリストが大体変換されることを確認済.


注意

	* 要素を非表示にするCSSセレクタに対応する予定はない(userContent.cssでどうぞ).
	* GUIをつくるつもりはない(簡単にフィルタを追加したい人はADBでどうぞ)


Version

	09/09/15 19:30 typo
	09/09/14 18:00 ちょこっと高速化
	09/09/09 20:00 前方一致/後方一致フィルタに対応
	09/09/09 17:30 ホワイトリスト対応
	09/09/09 17:10 ON,OFFができるように
	09/08/31 10:30 高速化+メモリリーク対処
	09/08/31 9:30 アスタリスクフィルターが正しく動作していなかったのを修正
	09/08/30 22:00 /ads/(ADBでは*/ads/*)のようなフィルターが正規表現と解釈されていたのを修正
	09/08/30 19:00 正規表現/アスタリスク/()を使用したフィルターに対応
	09/08/29 6:00 単純文字列/アスタリスク使用フィルターに対応(正規表現/()を使ったものには未対応)


ToDo

	* Adblock Adblock plus用リスト変換.html の変換精度向上
	* ヒット数/最終ヒット日時等の表示
	* フィルタ結果のキャッシュ
	* フィルタのショートカット作成
	* フィルタの追加
	* 高速化



（ADBを使ったことない）俺用仕様なので使いにくいかも...
